<!DOCTYPE html>
<html>
<head>
  <title>School ERP</title>
</head>
<body>

<h2>School ERP Dashboard</h2>

<button onclick="loadStudents()">Load Students</button>

<br><br>

<table border="1" id="table">
  <tr>
    <th>Name</th>
    <th>Class</th>
    <th>Roll</th>
  </tr>
</table>

<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

async function loadStudents() {
  const table = document.getElementById("table");

  table.innerHTML = `
    <tr>
      <th>Name</th>
      <th>Class</th>
      <th>Roll</th>
    </tr>
  `;

  const querySnapshot = await getDocs(
    collection(db, "schools", "school1", "students")
  );

  querySnapshot.forEach((doc) => {
    const d = doc.data();
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${d.name}</td>
      <td>${d.class}</td>
      <td>${d.roll}</td>
    `;
    table.appendChild(row);
  });
}

window.loadStudents = loadStudents;
</script>

</body>
</html>
